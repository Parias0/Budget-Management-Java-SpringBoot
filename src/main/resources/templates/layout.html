<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <meta charset="UTF-8">
  <title th:text="${pageTitle}">Budget Management</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <style>
    tbody tr.income-row td {
      color: green !important; /* Zielony dla przychodów */
    }

    tbody tr.expense-row td {
      color: red !important; /* Czerwony dla wydatków */
    }
  </style>

</head>
<body>
<!-- Navbar -->
<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- Kontener na dynamiczną treść -->
<div class="container mt-4">
  <div layout:fragment="content">
  </div>
</div>

<!-- Skrypt do wylogowania -->
<script>
  function logoutUser() {
  fetch('/api/auth/logout', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
  })
  .then(response => response.text())  // Parsowanie odpowiedzi jako JSON
  .then(data => {
    if (data === "User logged out successfully") {  // Sprawdzanie wiadomości
      // Przekierowanie na stronę logowania po wylogowaniu
      window.location.href = '/login';
    } else {
      alert("Logout failed");
    }
  })
  .catch(error => {
    console.error('Error during logout:', error);
    alert("Logout failed");
  });
}

</script>

</body>
</html>
